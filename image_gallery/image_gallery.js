var dir480 = "./image_gallery/images/480/";
var dirFull = "./image_gallery/images/";
var a480 = new Array("Greg Martin _ Before Mankind - 480.jpg", "Greg Martin _ Behold The Light - 480.jpg", "Greg Martin _ Between Giants - 480.jpg", "Greg Martin _ Cataclysm - 480.jpg", "Greg Martin _ Cataclysm II   Mod II - 480.jpg", "Greg Martin _ Cataclysm II - 480.jpg", "Greg Martin _ Celestia - 480.jpg", "Greg Martin _ Celestia III - 480.jpg", "Greg Martin _ Darkskies - 480.jpg", "Greg Martin _ Deepness Dawn   Mod II - 480.jpg", "Greg Martin _ Deepness Dawn - 480.jpg", "Greg Martin _ Effusion - 480.jpg", "Greg Martin _ Empyrean - 480.jpg", "Greg Martin _ Euphoria   Mod II - 480.jpg", "Greg Martin _ Euphoria - 480.jpg", "Greg Martin _ Genesis Unveiled   Mod II - 480.jpg", "Greg Martin _ Genesis Unveiled - 480.jpg", "Greg Martin _ Giants - 480.jpg", "Greg Martin _ Giants II - 480.jpg", "Greg Martin _ Glacial - 480.jpg", "Greg Martin _ Glacial Inferno - 480.jpg", "Greg Martin _ In Darkness Light - 480.jpg", "Greg Martin _ In The Realm Of Stars - 480.jpg", "Greg Martin _ In The Shadow Of The Stars - 480.jpg", "Greg Martin _ Incarnation - 480.jpg", "Greg Martin _ Indigo - 480.jpg", "Greg Martin _ Inevitable - 480.jpg", "Greg Martin _ Inferno - 480.jpg", "Greg Martin _ Jovian Sky   Mod - 480.jpg", "Greg Martin _ Jovian Sky - 480.jpg", "Greg Martin _ Maelstrom II   Mod II - 480.jpg", "Greg Martin _ Maelstrom II - 480.jpg", "Greg Martin _ MistyMountains - 480.jpg", "Greg Martin _ Only One - 480.jpg", "Greg Martin _ Phoenix Nebula - 480.jpg", "Greg Martin _ Pneuma Nebula - 480.jpg", "Greg Martin _ Resplendent - 480.jpg", "Greg Martin _ Riven - 480.jpg", "Greg Martin _ Shattered - 480.jpg", "Greg Martin _ Silhouettes - 480.jpg", "Greg Martin _ Ultimate End - 480.jpg", "Greg Martin _ Winter Mist - 480.jpg", "Greg Martin _ Winter Mist II - 480.jpg", "Guildwars Factions _ Undercity Concept - 480.jpg", "Guildwars _ Auguryrock - 480.jpg", "Guildwars _ Canyon - 480.jpg", "Guildwars _ Catacombs - 480.jpg", "Guildwars _ Crater - 480.jpg", "Guildwars _ Crystal Desert - 480.jpg", "Guildwars _ Crystal Spires - 480.jpg", "Guildwars _ Foundry - 480.jpg", "Guildwars _ Presearing Ascalon - 480.jpg", "Guildwars _ Rotscale - 480.jpg", "Guildwars _ Shiverpeaks - 480.jpg", "Guildwars _ Sorrows Funace Concept - 480.jpg", "Guildwars _ Sorrows Furnace - 480.jpg", "Guildwars _ Sorrows Furnace Machines - 480.jpg", "StarCraft _ Dark - 480.jpg", "StarCraft _ Fenix - 480.jpg", "WarCraft III _ humanboxart - 480.jpg", "WarCraft III _ nightelfboxart - 480.jpg", "WarCraft III _ orcboxart - 480.jpg", "WarCraft III _ undeadboxart - 480.jpg", "Witcher _ Logo - 480.jpg", "Witcher _ Night - 480.jpg", "Witcher _ Trees - 480.jpg");
var aFull = new Array("Greg Martin _ Before Mankind - 1600.jpg", "Greg Martin _ Behold The Light - 1600.jpg", "Greg Martin _ Between Giants - 1600.jpg", "Greg Martin _ Cataclysm - 1024.jpg", "Greg Martin _ Cataclysm II   Mod II - 1600.jpg", "Greg Martin _ Cataclysm II - 1600.jpg", "Greg Martin _ Celestia - 1024.jpg", "Greg Martin _ Celestia III - 1600.jpg", "Greg Martin _ Darkskies - 1024.jpg", "Greg Martin _ Deepness Dawn   Mod II - 1600.jpg", "Greg Martin _ Deepness Dawn - 1600.jpg", "Greg Martin _ Effusion - 1600.jpg", "Greg Martin _ Empyrean - 1600.jpg", "Greg Martin _ Euphoria   Mod II - 1600.jpg", "Greg Martin _ Euphoria - 1600.jpg", "Greg Martin _ Genesis Unveiled   Mod II - 1600.jpg", "Greg Martin _ Genesis Unveiled - 1600.jpg", "Greg Martin _ Giants - 1024.jpg", "Greg Martin _ Giants II - 1024.jpg", "Greg Martin _ Glacial - 1600.jpg", "Greg Martin _ Glacial Inferno - 1600.jpg", "Greg Martin _ In Darkness Light - 1600.jpg", "Greg Martin _ In The Realm Of Stars - 1600.jpg", "Greg Martin _ In The Shadow Of The Stars - 1600.jpg", "Greg Martin _ Incarnation - 1600.jpg", "Greg Martin _ Indigo - 1600.jpg", "Greg Martin _ Inevitable - 1600.jpg", "Greg Martin _ Inferno - 1600.jpg", "Greg Martin _ Jovian Sky - 1024.jpg", "Greg Martin _ Jovian Sky - 1600.jpg", "Greg Martin _ Maelstrom II   Mod II - 1600.jpg", "Greg Martin _ Maelstrom II - 1600.jpg", "Greg Martin _ MistyMountains - 1024.jpg", "Greg Martin _ Only One - 1600.jpg", "Greg Martin _ Phoenix Nebula - 1600.jpg", "Greg Martin _ Pneuma Nebula - 1600.jpg", "Greg Martin _ Resplendent - 1600.jpg", "Greg Martin _ Riven - 1600.jpg", "Greg Martin _ Shattered - 1600.jpg", "Greg Martin _ Silhouettes - 1600.jpg", "Greg Martin _ Ultimate End - 1600.jpg", "Greg Martin _ Winter Mist - 1600.jpg", "Greg Martin _ Winter Mist II - 1600.jpg", "Guildwars Factions _ Undercity Concept - 1600.jpg", "Guildwars _ Auguryrock - 1600.jpg", "Guildwars _ Canyon - 1600.jpg", "Guildwars _ Catacombs - 1600.jpg", "Guildwars _ Crater - 1600.jpg", "Guildwars _ Crystal Desert - 1600.jpg", "Guildwars _ Crystal Spires - 1600.jpg", "Guildwars _ Foundry - 1600.jpg", "Guildwars _ Presearing Ascalon - 1600.jpg", "Guildwars _ Rotscale - 1600.jpg", "Guildwars _ Shiverpeaks - 1600.jpg", "Guildwars _ Sorrows Funace Concept - 1600.jpg", "Guildwars _ Sorrows Furnace - 1600.jpg", "Guildwars _ Sorrows Furnace Machines - 1600.jpg", "StarCraft _ Dark - 1600.jpg", "StarCraft _ Fenix - 1600.jpg", "WarCraft III _ humanboxart - 1600.jpg", "WarCraft III _ nightelfboxart - 1600.jpg", "WarCraft III _ orcboxart - 1600.jpg", "WarCraft III _ undeadboxart - 1600.jpg", "Witcher _ Logo - 1600.jpg", "Witcher _ Night - 1600.jpg", "Witcher _ Trees - 1600.jpg");
var index;
var maxIndex = a480.length - 1;
var curIndex;
var picView;  //main img
var picBack; //back img
var picNext; //next img
var picBuffer; //buffer next img
var loadView; //main load message
var loadBack; //back load message
var loadNext; //next load message
var anchor; //current image anchor

function getCookie(c_name) {
	if (document.cookie.length > 0) {
		c_start=document.cookie.indexOf(c_name + "=");
		if (c_start != -1) {
			c_start = c_start + c_name.length + 1; 
			c_end = document.cookie.indexOf(";", c_start);
			if (c_end == -1) c_end = document.cookie.length;
			return unescape(document.cookie.substring(c_start, c_end));
		}
	}
	return false;
}
function setCookie(c_name, value, expiredays) {
	var exdate = new Date();
	exdate.setDate(exdate.getDate() + expiredays);
	document.cookie = c_name + "=" + escape(value)+
	((expiredays == null) ? "" : ";expires=" + exdate.toGMTString());
}

function Init() {
	curIndex = document.getElementById("index");
	loadView = document.getElementById("loadView");
	loadBack = document.getElementById("loadBack");
	loadNext = document.getElementById("loadNext");
	picView = document.getElementById("picView");
	picView.onload = loaded;
	picView.load = loadView;
	picBack = document.getElementById("picBack");
	picBack.onload = loaded;
	picBack.load = loadBack;
	picNext = document.getElementById("picNext");
	picNext.onload = loaded;
	picNext.load = loadNext;
	picBuffer = document.getElementById("picBuffer");
	anchor = document.getElementById("anchor");

	index = getCookie("wallpaper_index");
	if (index) index = (+index);
	else index = 52; //Math.floor(Math.random() * a480.length);
	if (window.opera) isOpera = true;

	evaluate();
}
function adjust(mod) {
	var neoIndex = index + mod;
	while (neoIndex > maxIndex) { neoIndex -= (maxIndex + 1); }
	while (neoIndex < 0) { neoIndex += (maxIndex + 1); }
	return neoIndex;
}
function evaluate() {
	setCookie("wallpaper_index", index, 1);
	loadView.style.display = "inline";
	loadBack.style.display = "inline";
	loadNext.style.display = "inline";
	anchor.href = dirFull + aFull[index];
	curIndex.innerHTML = (index + 1) + " / " + (maxIndex + 1);
	picView.src = dir480 + a480[index];
	picNext.src = dir480 + a480[adjust(1)];
	picBack.src = dir480 + a480[adjust(-1)];
	picBuffer.src = dir480 + a480[adjust(2)];
}
function advance(mod) {
	index = adjust(mod);
	evaluate();
	return false;
}
function loaded() {
	this.load.style.display = "none";
}
